# PL/SQL (SQL 파일 입출력)
변수선언 가능
비교 처리 가능

 PL/SQL 의 구조
![](https://i.imgur.com/c98u4kS.png)

![](https://i.imgur.com/1PSZ2Xh.png)


PROCEDURE 리턴값이 없다

FUNCTION 리턴값이 있다

SET SERVEROUTPU ON (출력화 주는 내용을 화면에 보여주는 설정)


```
BEGIN
 DBMS_OUTPUT.PUT_LINE('Hello World!');
END;
/
```


```
변수 선언할때 
:= 로 선언 해야함
```



![](https://i.imgur.com/KkqOhKR.png)


자료형과  유사하게 선언하는것을 SCALAR 라고함

```
DECLARE
	VEMPNO NUMBER(4);
	VENAME VARCHAR2(10);
BEGIN
	VEMPNO := 7788;
	VENAME := 'SCOTT';
	DBMS_OUTPUT.PUT_LINE('사번/이름');
	DBMS_OUTPUT.PUT_LINE('-----------');
	DBMS_OUTPUT.PUT_LINE(VEMPNO || '/' || VENAME);
END;
/
```


## 레퍼런스

```
VEMPNO EMP.EMPNO%TYPE; /  VEMPNO 에 EMPNO 타입과 맞는 자료형 선언

VEMPNO EMP%ROWTYPE;   / EMP 로우를 참조
```


## 예외 처리 
```
EXCEPTION
		WHEN NO_DATA_FOUND THEN // 데이터가 없으면
			DBMS_OUTPUT.PUT_LINE('조회된 결과가 없습니다.');
		WHEN TOO_MANY_ROWS THEN // 데이터가 많으면
			DBMS_OUTPUT.PUT_LINE('자료가 2건 이상입니다.');
		WHEN OTHERS THEN // 그외 기타 오류
			DBMS_OUTPUT.PUT_LINE('기타 에러입니다.');

```

## ROWTYPE 를이용한참조
```
DECLARE
	DEPT_RECORD DEPT%ROWTYPE;
BEGIN
	SELECT DEPTNO, DNAME,LOC
	INTO DEPT_RECORD
	FROM DEPT
	WHERE DEPTNO = 10;
	DBMS_OUTPUT.PUT_LINE('부서번호 : '|| TO_CHAR(dept_record.deptno));
	DBMS_OUTPUT.PUT_LINE('부서이름 : '|| dept_record.dname);
	DBMS_OUTPUT.PUT_LINE('지역 : '|| dept_record.loc);

END;
/
```


## ROWTYPE을 이용한EMP 참조 형식 
```
SET SERVEROUTPUT ON

DECLARE
	EMP_RECORD EMP%ROWTYPE;
BEGIN
	SELECT *
	INTO EMP_RECORD
	FROM EMP
	WHERE ENAME = 'SCOTT';
	DBMS_OUTPUT.PUT_LINE(RPAD('사번',6) || RPAD('이름',8) ||  RPAD('직업',10) || RPAD('상사',6) || RPAD('입사일',10) || RPAD('급여',6) || RPAD('커미션',6) || RPAD('부서번호',12));
	DBMS_OUTPUT.PUT_LINE(RPAD('-',60,'-'));
            DBMS_OUTPUT.PUT_LINE(RPAD(EMP_RECORD.EMPNO,6) || RPAD(EMP_RECORD.ENAME,8) || RPAD(EMP_RECORD.JOB,10) || RPAD(NVL(TO_CHAR(EMP_RECORD.MGR),' '),6) || RPAD(EMP_RECORD.HIREDATE,10) || RPAD(EMP_RECORD.SAL,6) || RPAD(NVL(TO_CHAR(EMP_RECORD.COMM),' '),6) || LPAD(EMP_RECORD.DEPTNO,6));

END;
/
```


## 조건문 형식 IF (조건) THEN 조건문 내용 END IF;
```
IF(VDEPTNO = 10) THEN
		VDNAME := 'ACCOUNTING';
	END IF;
```


**ELSE IF 가 아닌 ELSIF 임**